import {NavLink, Outlet} from "react-router-dom";
import s from './Lk.module.scss'
import {useEffect, useRef, useState} from "react";
import LkMenuItem from "@/pages/Lk/LkMenus/LkMenuItem/LkMenuItem.jsx";
import LkRightSideMenuItem from "@/pages/Lk/LkMenus/LkRightSideMenuItem/LkRightSideMenuItem.jsx";

const Lk = () => {


  const rightBarRef = useRef(null)

  const [sidePanel, setSidePanel] = useState([])   // правая панель

  const [currentRightPanelItem, setCurrentRightPanelItem] = useState(null)

  console.log('currentRightPanelItem', currentRightPanelItem)

  const browserData = {
    type: "process",
    name: "browser",
    label: "Обозреватель",
    heading: "Мои товары",
    data: [
      {
        productId: "1",
        productName: "Смартфон Xiaomi Redmi A2+ 3/64 Gb",
        sku: "173647332412",
        isLiked: false,
        pictureUrl: null,
        chat: true
      },
      {
        productId: "2",
        productName: "Смартфон Xiaomi Redmi A2+ 3/64 Gb",
        sku: "173647332412",
        isLiked: true,
        pictureUrl: null,
        chat: false
      },
      {
        productId: "3",
        productName: "Смартфон Xiaomi Redmi A2+ 3/64 Gb",
        sku: "173647332412",
        isLiked: false,
        pictureUrl: null,
        chat: false
      },
      {
        productId: "4",
        productName: "Смартфон Xiaomi Redmi A2+ 3/64 Gb",
        sku: "173647332412",
        isLiked: false,
        pictureUrl: null,
        chat: false
      },
      {
        productId: "5",
        productName: "Смартфон Xiaomi Redmi A2+ 3/64 Gb",
        sku: "173647332412",
        isLiked: false,
        pictureUrl: null,
        chat: false
      },
      {
        productId: "6",
        productName: "Смартфон Xiaomi Redmi A2+ 3/64 Gb",
        sku: "173647332412",
        isLiked: false,
        pictureUrl: null,
        chat: false
      }
    ]
  }

  const browserData2 = {
    type: "process",
    name: "browser",
    label: "Еще панель",
    heading: "Мои товары-2",
    data: [
      {
        productId: "1",
        productName: "Смартфон Xiaomi Redmi A2+ 3/64 Gb",
        sku: "173647332412",
        isLiked: false,
        pictureUrl: null,
        chat: false
      },
      {
        productId: "2",
        productName: "Смартфон Xiaomi Redmi A2+ 3/64 Gb",
        sku: "173647332412",
        isLiked: false,
        pictureUrl: null,
        chat: true
      },
      {
        productId: "3",
        productName: "Смартфон Xiaomi Redmi A2+ 3/64 Gb",
        sku: "173647332412",
        isLiked: false,
        pictureUrl: null,
        chat: false
      },
      {
        productId: "4",
        productName: "Смартфон Xiaomi Redmi A2+ 3/64 Gb",
        sku: "173647332412",
        isLiked: false,
        pictureUrl: null,
        chat: false
      },
      {
        productId: "5",
        productName: "Смартфон Xiaomi Redmi A2+ 3/64 Gb",
        sku: "173647332412",
        isLiked: false,
        pictureUrl: null,
        chat: false
      },
      {
        productId: "6",
        productName: "Смартфон Xiaomi Redmi A2+ 3/64 Gb",
        sku: "173647332412",
        isLiked: false,
        pictureUrl: null,
        chat: false
      },
    ]
  }


  // получаем в апи состав боковой панели, пока - моки
  useEffect(() => {
    setSidePanel([browserData, browserData2])
  }, []);

  const [rightPanelOpen, setRightPanelOpen] = useState(false);
  const [requestDetails, setRequestDetails] = useState(null);

  const menuItems = [
    {
      svg: <svg width="24" height="25" viewBox="0 0 24 25" fill="#658092" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M12.1205 14.03C12.1005 14.03 12.0705 14.03 12.0505 14.03C12.0205 14.03 11.9805 14.03 11.9505 14.03C9.68047 13.96 7.98047 12.19 7.98047 10.01C7.98047 7.78998 9.79047 5.97998 12.0105 5.97998C14.2305 5.97998 16.0405 7.78998 16.0405 10.01C16.0305 12.2 14.3205 13.96 12.1505 14.03C12.1305 14.03 12.1305 14.03 12.1205 14.03ZM12.0005 7.46998C10.6005 7.46998 9.47047 8.60998 9.47047 9.99998C9.47047 11.37 10.5405 12.48 11.9005 12.53C11.9305 12.52 12.0305 12.52 12.1305 12.53C13.4705 12.46 14.5205 11.36 14.5305 9.99998C14.5305 8.60998 13.4005 7.46998 12.0005 7.46998Z"/>
        <path
          d="M12.0008 23.2499C9.31081 23.2499 6.74081 22.2499 4.75081 20.4299C4.57081 20.2699 4.49081 20.0299 4.51081 19.7999C4.64081 18.6099 5.38081 17.4999 6.61081 16.6799C9.59081 14.6999 14.4208 14.6999 17.3908 16.6799C18.6208 17.5099 19.3608 18.6099 19.4908 19.7999C19.5208 20.0399 19.4308 20.2699 19.2508 20.4299C17.2608 22.2499 14.6908 23.2499 12.0008 23.2499ZM6.08081 19.5999C7.74081 20.9899 9.83081 21.7499 12.0008 21.7499C14.1708 21.7499 16.2608 20.9899 17.9208 19.5999C17.7408 18.9899 17.2608 18.3999 16.5508 17.9199C14.0908 16.2799 9.92081 16.2799 7.44081 17.9199C6.73081 18.3999 6.26081 18.9899 6.08081 19.5999Z"/>
        <path
          d="M12 23.25C6.07 23.25 1.25 18.43 1.25 12.5C1.25 6.57 6.07 1.75 12 1.75C17.93 1.75 22.75 6.57 22.75 12.5C22.75 18.43 17.93 23.25 12 23.25ZM12 3.25C6.9 3.25 2.75 7.4 2.75 12.5C2.75 17.6 6.9 21.75 12 21.75C17.1 21.75 21.25 17.6 21.25 12.5C21.25 7.4 17.1 3.25 12 3.25Z"/>
      </svg>,
      url: 'main',
      tooltip: 'Главная'
    },
    {
      svg: <svg width="24" height="25" viewBox="0 0 24 25" fill="#658092" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M14.7017 23.25H9.30172C4.36172 23.25 2.26172 21.14 2.26172 16.21V11.72C2.26172 11.31 2.60172 10.97 3.01172 10.97C3.42172 10.97 3.76172 11.31 3.76172 11.72V16.21C3.76172 20.3 5.21172 21.75 9.30172 21.75H14.6917C18.7817 21.75 20.2317 20.3 20.2317 16.21V11.72C20.2317 11.31 20.5717 10.97 20.9817 10.97C21.3917 10.97 21.7317 11.31 21.7317 11.72V16.21C21.7417 21.14 19.6317 23.25 14.7017 23.25Z"/>
        <path
          d="M11.999 13.25C10.899 13.25 9.89902 12.82 9.18902 12.03C8.47902 11.24 8.14902 10.21 8.25902 9.11L8.92903 2.43C8.96903 2.05 9.28903 1.75 9.67903 1.75H14.349C14.739 1.75 15.059 2.04 15.099 2.43L15.769 9.11C15.879 10.21 15.549 11.24 14.839 12.03C14.099 12.82 13.099 13.25 11.999 13.25ZM10.349 3.25L9.74902 9.26C9.67902 9.93 9.87903 10.56 10.299 11.02C11.149 11.96 12.849 11.96 13.699 11.02C14.119 10.55 14.319 9.92 14.249 9.26L13.649 3.25H10.349Z"/>
        <path
          d="M18.308 13.25C16.278 13.25 14.468 11.61 14.258 9.59L13.558 2.58C13.538 2.37 13.608 2.16 13.748 2C13.888 1.84 14.088 1.75 14.308 1.75H17.358C20.298 1.75 21.668 2.98 22.078 6L22.358 8.78C22.478 9.96 22.118 11.08 21.348 11.93C20.578 12.78 19.498 13.25 18.308 13.25ZM15.138 3.25L15.758 9.44C15.888 10.69 17.048 11.75 18.308 11.75C19.068 11.75 19.748 11.46 20.238 10.93C20.718 10.4 20.938 9.69 20.868 8.93L20.588 6.18C20.278 3.92 19.548 3.25 17.358 3.25H15.138Z"/>
        <path
          d="M5.63904 13.25C4.44904 13.25 3.36904 12.78 2.59904 11.93C1.82904 11.08 1.46904 9.96 1.58904 8.78L1.85904 6.03C2.27904 2.98 3.64904 1.75 6.58905 1.75H9.63904C9.84904 1.75 10.049 1.84 10.199 2C10.349 2.16 10.409 2.37 10.389 2.58L9.68904 9.59C9.47904 11.61 7.66904 13.25 5.63904 13.25ZM6.58905 3.25C4.39904 3.25 3.66904 3.91 3.34904 6.2L3.07904 8.93C2.99904 9.69 3.22904 10.4 3.70904 10.93C4.18904 11.46 4.86904 11.75 5.63904 11.75C6.89904 11.75 8.06904 10.69 8.18904 9.44L8.80905 3.25H6.58905Z"/>
        <path
          d="M14.5 23.25H9.5C9.09 23.25 8.75 22.91 8.75 22.5V20C8.75 17.9 9.9 16.75 12 16.75C14.1 16.75 15.25 17.9 15.25 20V22.5C15.25 22.91 14.91 23.25 14.5 23.25ZM10.25 21.75H13.75V20C13.75 18.74 13.26 18.25 12 18.25C10.74 18.25 10.25 18.74 10.25 20V21.75Z"/>
      </svg>,
      url: 'shop',
      tooltip: 'Магазин'
    },
    {
      svg: <svg width="24" height="25" viewBox="0 0 24 25" fill="#658092" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M12.0013 13.8C11.8713 13.8 11.7413 13.77 11.6213 13.7L2.79132 8.59002C2.43132 8.38002 2.3113 7.91999 2.5213 7.55999C2.7313 7.19999 3.1813 7.07997 3.5513 7.28997L12.0013 12.18L20.4013 7.32C20.7613 7.11 21.2213 7.24002 21.4313 7.59002C21.6413 7.95002 21.5113 8.40999 21.1613 8.61999L12.3913 13.7C12.2613 13.76 12.1313 13.8 12.0013 13.8Z"/>
        <path
          d="M12 22.86C11.59 22.86 11.25 22.52 11.25 22.11V13.04C11.25 12.63 11.59 12.29 12 12.29C12.41 12.29 12.75 12.63 12.75 13.04V22.11C12.75 22.52 12.41 22.86 12 22.86Z"/>
        <path
          d="M12.0006 23.25C11.1206 23.25 10.2506 23.06 9.56061 22.68L4.22061 19.71C2.77061 18.91 1.64062 16.98 1.64062 15.32V9.66998C1.64062 8.00998 2.77061 6.09002 4.22061 5.28002L9.56061 2.32C10.9306 1.56 13.0706 1.56 14.4406 2.32L19.7806 5.28997C21.2306 6.08997 22.3606 8.01999 22.3606 9.67999V15.33C22.3606 16.99 21.2306 18.91 19.7806 19.72L14.4406 22.68C13.7506 23.06 12.8806 23.25 12.0006 23.25ZM12.0006 3.24999C11.3706 3.24999 10.7506 3.38 10.2906 3.63L4.95062 6.59997C3.99062 7.13997 3.14062 8.56999 3.14062 9.67999V15.33C3.14062 16.43 3.99062 17.87 4.95062 18.41L10.2906 21.38C11.2006 21.89 12.8006 21.89 13.7106 21.38L19.0506 18.41C20.0106 17.87 20.8606 16.44 20.8606 15.33V9.67999C20.8606 8.57999 20.0106 7.13997 19.0506 6.59997L13.7106 3.63C13.2506 3.38 12.6306 3.24999 12.0006 3.24999Z"/>
        <path
          d="M17.0012 14.49C16.5912 14.49 16.2512 14.15 16.2512 13.74V10.5201L7.13116 5.26007C6.77116 5.05007 6.65114 4.59005 6.86114 4.24005C7.07114 3.88005 7.52116 3.76003 7.88116 3.97003L17.3712 9.45007C17.6012 9.58007 17.7512 9.83003 17.7512 10.1V13.7601C17.7512 14.1501 17.4112 14.49 17.0012 14.49Z"/>
      </svg>,
      url: 'orders',
      tooltip: 'Заказы'
    },
    {
      svg: <svg width="24" height="25" viewBox="0 0 24 25" fill="#658092" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M16 23.25H8C2.25 23.25 2.25 20.2 2.25 17.5V16.5C2.25 14.27 2.25 11.75 7 11.75C8.19 11.75 8.63 12.04 9.25 12.5C9.28 12.53 9.32 12.55 9.35 12.59L10.37 13.67C11.23 14.58 12.79 14.58 13.65 13.67L14.67 12.59C14.7 12.56 14.73 12.53 14.77 12.5C15.39 12.03 15.83 11.75 17.02 11.75C21.77 11.75 21.77 14.27 21.77 16.5V17.5C21.75 21.32 19.82 23.25 16 23.25ZM7 13.25C3.75 13.25 3.75 14.27 3.75 16.5V17.5C3.75 20.24 3.75 21.75 8 21.75H16C18.98 21.75 20.25 20.48 20.25 17.5V16.5C20.25 14.27 20.25 13.25 17 13.25C16.28 13.25 16.13 13.34 15.7 13.66L14.73 14.69C14.01 15.45 13.04 15.87 12 15.87C10.96 15.87 9.99 15.45 9.27 14.69L8.3 13.66C7.87 13.34 7.72 13.25 7 13.25Z"/>
        <path
          d="M19 13.25C18.59 13.25 18.25 12.91 18.25 12.5V6.5C18.25 4.27 18.25 3.25 15 3.25H9C5.75 3.25 5.75 4.27 5.75 6.5V12.5C5.75 12.91 5.41 13.25 5 13.25C4.59 13.25 4.25 12.91 4.25 12.5V6.5C4.25 4.27 4.25 1.75 9 1.75H15C19.75 1.75 19.75 4.27 19.75 6.5V12.5C19.75 12.91 19.41 13.25 19 13.25Z"/>
        <path
          d="M13.8808 10.48H10.5508C10.1408 10.48 9.80078 10.14 9.80078 9.72998C9.80078 9.31998 10.1408 8.97998 10.5508 8.97998H13.8808C14.2908 8.97998 14.6308 9.31998 14.6308 9.72998C14.6308 10.14 14.3008 10.48 13.8808 10.48Z"/>
        <path
          d="M14.7188 7.47998H9.71875C9.30875 7.47998 8.96875 7.13998 8.96875 6.72998C8.96875 6.31998 9.30875 5.97998 9.71875 5.97998H14.7188C15.1287 5.97998 15.4688 6.31998 15.4688 6.72998C15.4688 7.13998 15.1388 7.47998 14.7188 7.47998Z"/>
      </svg>,
      url: 'requests',
      tooltip: 'Заявки'
    },

    {
      svg: <svg width="24" height="25" viewBox="0 0 24 25" fill="#658092" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M17.8681 22.37C17.5581 22.37 17.2481 22.29 16.9681 22.12L12.9581 19.74C12.5381 19.73 12.1181 19.7 11.7181 19.64C11.4481 19.6 11.2181 19.42 11.1181 19.16C11.0181 18.9 11.0681 18.62 11.2481 18.41C11.9081 17.64 12.2481 16.72 12.2481 15.74C12.2481 13.32 10.1181 11.35 7.49812 11.35C6.51812 11.35 5.57812 11.62 4.78812 12.14C4.56812 12.28 4.29812 12.3 4.05812 12.19C3.82812 12.08 3.65813 11.86 3.62813 11.6C3.59813 11.32 3.57812 11.04 3.57812 10.75C3.57812 5.79 7.87813 1.76001 13.1581 1.76001C18.4381 1.76001 22.7381 5.79 22.7381 10.75C22.7381 13.47 21.4781 15.97 19.2581 17.68L19.5981 20.4C19.6781 21.08 19.3781 21.72 18.8081 22.09C18.5281 22.27 18.1981 22.37 17.8681 22.37ZM13.1481 18.23C13.2881 18.22 13.4281 18.26 13.5481 18.34L17.7381 20.83C17.8481 20.9 17.9381 20.87 17.9981 20.83C18.0481 20.8 18.1281 20.72 18.1081 20.58L17.7181 17.42C17.6881 17.14 17.8081 16.87 18.0281 16.71C20.0681 15.28 21.2381 13.1 21.2381 10.73C21.2381 6.59998 17.6181 3.23999 13.1581 3.23999C8.86813 3.23999 5.34812 6.36003 5.08812 10.28C5.83812 9.99003 6.64813 9.83002 7.48813 9.83002C10.9381 9.83002 13.7381 12.47 13.7381 15.72C13.7481 16.6 13.5381 17.45 13.1481 18.23Z"/>
        <path
          d="M4.57782 23.2501C4.31782 23.2501 4.06781 23.1801 3.83781 23.0301C3.38781 22.7401 3.14782 22.2401 3.20782 21.7101L3.40782 20.17C2.05782 19.07 1.25781 17.44 1.25781 15.73C1.25781 13.78 2.27782 11.9601 3.98782 10.8701C5.01782 10.2001 6.23781 9.84009 7.50781 9.84009C10.9578 9.84009 13.7578 12.48 13.7578 15.73C13.7578 17.05 13.2778 18.3501 12.3978 19.3801C11.2678 20.7501 9.57782 21.55 7.71782 21.61L5.27782 23.0601C5.05782 23.1901 4.81782 23.2501 4.57782 23.2501ZM7.49782 11.3401C6.51782 11.3401 5.57781 11.6101 4.78781 12.1301C3.50781 12.9501 2.74782 14.29 2.74782 15.73C2.74782 17.12 3.42782 18.3901 4.62782 19.2101C4.85782 19.3701 4.97781 19.64 4.94781 19.92L4.72781 21.6301L7.11781 20.2101C7.23781 20.1401 7.36782 20.1 7.49782 20.1C8.96782 20.1 10.3578 19.4701 11.2378 18.4001C11.8978 17.6201 12.2478 16.7 12.2478 15.72C12.2478 13.31 10.1178 11.3401 7.49782 11.3401Z"/>
      </svg>,
      url: 'chat',
      tooltip: 'Сообщения'
    }
  ]


  return (
    <div className={s.lk}>
      <ul className={s.sideBar}>
        {
          menuItems.map((item, i) => <LkMenuItem item={item} key={i}/>)
        }

      </ul>
      <div className={s.lkContent}>
        <Outlet context={{rightBarRef, rightPanelOpen, requestDetails, setRequestDetails}}/>
      </div>
      <div className={s.rightBarWrapper}>
        <ul className={s.rightBar} ref={rightBarRef}>
          {
            sidePanel.map((item, i) => <LkRightSideMenuItem
                key={i}
                item={item}
                setRightPanelOpen={setRightPanelOpen}
                rightPanelOpen={rightPanelOpen}
                currentRightPanelItem={currentRightPanelItem}
                setCurrentRightPanelItem={setCurrentRightPanelItem}
                requestDetails={requestDetails}
                setRequestDetails={setRequestDetails}
              />
            )
          }
        </ul>
      </div>
    </div>

  )
}

export default Lk;

